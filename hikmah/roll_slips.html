<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Roll Slips - Hikmah Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Poppins:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }

        .font-amiri {
            font-family: 'Amiri', serif;
        }

        .flyer-bg {
            background-color: #0a2342;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm-9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm-9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm-9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9z'/%3E%3Cpath d='M6 5V0h1v5h5v1H6v5H5V6H0V5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h5V0h1v5h4v1h-4v5h4v1h-4v5h4v1h-4v5h4v1h-4v5h4v1h-4v5h4v1h-4v5h4v1h-4v5h4v1h-4v5h4v1h-4v5h-1v-5h-5v5h-1v-5h-5v5h-1v-5h-5v5h-1v-5h-5v5h-1v-5h-5v5h-1v-5h-5v5h-1v-5h-5v5h-1v-5h-5v5h-1v-5h-5v5h-1v-5h-5v5h-1v-5h-5V90h5v-5H5v5H0V85h5v-5H0V75h5v-5H0V65h5v-5H0V55h5v-5H0V45h5v-5H0V35h5v-5H0V25h5v-5H0V15h5v-5H0V5h5V0h1v5h5v1H6v5h5V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h1V6h5v5h-1v5h-5v5h5v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5V90h5v-5H5v5H0V75h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5V80h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5V70h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h1v-5h5v5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5h-1v5h-5v-5H6v5H5V70h-5v-5z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .flyer-content {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .gold-text {
            color: #FFD700;
        }

        .gold-border {
            border-color: #FFD700;
        }

        .header-decoration {
            height: 2px;
            width: 100px;
            background: linear-gradient(90deg, transparent, #FFD700, transparent);
            margin: 1rem auto;
        }
    </style>
</head>

<body class="flyer-bg flex items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">
    <main class="max-w-6xl w-full flyer-content rounded-2xl shadow-2xl overflow-hidden text-white border-2 gold-border">
        <!-- Header -->
        <header class="p-8 text-center border-b-2 gold-border">
            <h1 class="font-amiri text-5xl md:text-6xl font-bold gold-text drop-shadow-lg">Download&nbsp;Roll&nbsp;Slips
            </h1>
            <div class="header-decoration"></div>
        </header>

        <section class="p-6 md:p-8 space-y-6">
            <!-- Search input -->
            <div class="flex items-center gap-3">
                <input id="search-input" type="text" placeholder="Search by file name..."
                    class="w-full p-3 rounded-lg bg-slate-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-600" />
                <button id="clear-search"
                    class="shrink-0 px-4 py-3 rounded-lg bg-yellow-600 hover:bg-yellow-700 focus:outline-none">
                    Clear
                </button>
            </div>

            <!-- Grid view -->
            <div id="roll-slip-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </section>
    </main>

    <script>
        const basePath = './assets/roll_slips/';
        const manifestPath = './assets/name_index.json';
        const fileNames = [];

        async function fetchFileNames() {
            const res = await fetch(manifestPath);
            if (!res.ok) throw new Error('Could not load rollâ€‘slip manifest');
            return await res.json();
        }

        /* Render the cards */
        function renderGrid() {
            const grid = document.getElementById('roll-slip-grid');
            const searchTerm = document.getElementById('search-input').value.trim().toLowerCase();

            grid.innerHTML = '';
            const filtered = fileNames.filter(name => name.toLowerCase().includes(searchTerm));

            if (filtered.length === 0) {
                grid.innerHTML =
                    '<p class="col-span-full text-center text-gray-400 italic">No roll slips match your search.</p>';
                return;
            }

            for (const name of filtered) {
                const card = document.createElement("article");
                card.className =
                    "relative group rounded-3xl overflow-hidden shadow-lg transition transform hover:scale-[1.02] hover:shadow-2xl bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800";

                // Subtle floating glow ring
                const ring = document.createElement("div");
                ring.className =
                    "pointer-events-none absolute inset-0 rounded-3xl ring-1 ring-inset ring-yellow-500/30 group-hover:ring-2 group-hover:ring-yellow-400/60 transition";
                card.appendChild(ring);

                // Decorative top bar
                const bar = document.createElement("div");
                bar.className =
                    "h-1 w-full bg-gradient-to-r from-yellow-400/0 via-yellow-500/70 to-yellow-400/0";
                card.appendChild(bar);

                // Content wrapper
                const content = document.createElement("div");
                content.className = "p-6 flex flex-col flex-1";
                card.appendChild(content);

                // Title row with icon
                const header = document.createElement("div");
                header.className = "flex items-start gap-3 mb-4";

                const svg = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "svg"
                );
                svg.setAttribute("viewBox", "0 0 24 24");
                svg.setAttribute("fill", "none");
                svg.setAttribute("stroke", "currentColor");
                svg.setAttribute("stroke-width", "1.5");
                svg.classList.add("w-6", "h-6", "text-yellow-400", "shrink-0");
                svg.innerHTML =
                    '<path d="M7 4v16l5-2 5 2V4l-5 2-5-2Z" stroke-linecap="round" stroke-linejoin="round" />';
                header.appendChild(svg);

                const title = document.createElement("h2");
                title.textContent = name
                    .replace(/_/g, " ")
                    .replace(/\d{4,}\.pdf$/, "")
                    .replace(/\b\w/g, (c) => c.toUpperCase());
                title.className =
                    "text-lg font-semibold text-white/90 leading-snug truncate";
                header.appendChild(title);

                content.appendChild(header);

                // Spacer flex-1 pushes button to bottom
                const spacer = document.createElement("div");
                spacer.className = "flex-1";
                content.appendChild(spacer);

                // Download button
                const link = document.createElement("a");
                link.href = basePath + name;
                link.download = name;
                link.textContent = "Download";
                link.className =
                    "block w-full text-center rounded-xl bg-yellow-500 font-bold text-slate-900 py-2.5 hover:bg-yellow-400 transition-colors shadow-md hover:shadow-lg";
                content.appendChild(link);

                grid.appendChild(card);
            }
        }

        async function init() {
            try {
                const files = await fetchFileNames();
                fileNames.push(...files);
                renderGrid();
            } catch (err) {
                console.error(err);
            }
        }

        // Event listeners
        document.getElementById('search-input').addEventListener('input', renderGrid);
        document.getElementById('clear-search').addEventListener('click', () => {
            document.getElementById('search-input').value = '';
            renderGrid();
        });

        init();
    </script>
</body>

</html>